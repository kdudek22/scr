package prod_cons_v2
public

	with Base_Types;

	system Prod_Consum
	end Prod_Consum;
	
	bus ethernet
	end ethernet;
	
	process Konsument
		features
			Pobierz: in event port;
	end Konsument;
	
	process Producent
		features
			Wstaw: out event port;
	end Producent;

	processor corei5
	  features
	  	eth: requires bus access ethernet;
	  properties
	    Scheduling_Protocol => (Round_Robin_Protocol);
	    Clock_Period => 1 ms;
	end corei5;

	system implementation Prod_Consum.impl
		subcomponents
			Prod_process: process Producent;
			Kons_process: process Konsument;
			Prod_cpu: processor corei5;
		    Kons_cpu: processor corei5;
		    Mag_bus : bus ethernet;
		connections
		    eth1: bus access Mag_bus -> Prod_cpu.eth;
		    eth2: bus access Mag_bus -> Kons_cpu.eth;
		    Prod_Kons_conn: port Prod_process.Wstaw -> Kons_process.Pobierz;
	end Prod_Consum.impl;

	
end prod_cons_v2;
